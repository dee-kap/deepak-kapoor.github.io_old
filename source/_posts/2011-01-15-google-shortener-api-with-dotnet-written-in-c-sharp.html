---
layout: post
title: Google Shortener API For .NET Written In C#
categories:
- .NET
- Microsoft
tags:
- .Net
- C#
- Google
- Visual Studio 2010
- Web
status: publish
type: post
published: true
meta:
  _wpas_done_all: '1'
  _syntaxhighlighter_encoded: '1'
  views: '6325'
  _wp_old_slug: google-shortener-api-with-c
  _edit_last: '1'
  _wp_rp_extracted_image_url: https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image9-150x150.jpg
  _wp_rp_extracted_image_url_full: https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image9.png
  wpzoom_is_featured: ''
  wpzoom_is_carousel: ''
  wpzoom_show_media: ''
  wpzoom_post_template: ''
  wpzoom_post_embed_code: ''
  simplecatch-sidebarlayout: ''
---
<p><a href="https://code.google.com/p/n-gshortener/"><img style="background-image: none; border-right-width: 0px; margin: 0px 10px 10px; padding-left: 0px; padding-right: 0px; display: inline; float: left; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" align="left" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2011/01/image.png" width="56" height="59" /></a>Google Shortener is a service provided by Google to create short URLs. Google Shortener has been available for some time now but only recently Google released a public API to access this service programmatically. Today I decided to try it out and wrote some C# code to work with the API. I will describe what I did in this post.</p>  <h3>A bit about the API</h3>  <p>Like other URL shorteners, Google API also takes in a long URL and gives you back a short one. When you click on the short URL, you end up at the same location on web as you did with your original long URL.</p>  <p>The API itself is implemented as a RESTful service and is very simple. You can read the overview and reference for API <a href="http://code.google.com/apis/urlshortener/overview.html">here</a>.</p>  <h3>.NET Wrapper</h3>  <p>I wanted to use the API in my .NET application so I created a wrapper. I have made the source code available at <a href="https://code.google.com/p/n-gshortener/">code.google.com</a>. Feel free to download and play with it.</p>  <p>There are three methods in Google Shortener API:</p>  <ol>   <li>url.insert – Shrinks a Url. </li>    <li>url.get – Returns the long Url for a valid short url. </li>    <li>url.list – Returns a list of Urls shortened by an authenticated user. Analytics data is also returned by this method. </li> </ol>  <p>If you want analytics for your Url then you must invoke the methods by passing in an API key. You can get your API key from <a href="http://code.google.com/apis/console/">Google API Console</a>.</p>  <p>Enough talk. Let me show you the code. The main class in the wrapper is called Shortener which contains two methods: GetShortUrl() and GetLongUrl(). An API key can be passed in to the constructor of Shortener and the API key will be used for all subsequent requests for that instance.  

<pre class="lang:c# decode:true " >
public Reply GetShortUrl(string longUrl)
{
  string data = &quot;{&quot;longUrl&quot;:&quot;&quot; + longUrl + &quot;&quot;}&quot;;
  string postUrl = googleShortenerUrl;
  string response = HttpHelper.HttpPOST(postUrl, data);
  return DeserializeJSON(response);
}

public Reply GetLongUrl(string shortUrl)
{
  string getUrl = googleShortenerUrl + &quot;&amp;amp;shortUrl=&quot; + shortUrl;
  string response = HttpHelper.HttpGET(getUrl);
  return DeserializeJSON(response);
}

</pre>

The response received from Google is deserialized into a Reply class.  
  
<pre class="lang:c# decode:true " >
public class Reply
{
  public string kind { get; set; }

  public string id { get; set; }

  public string longUrl { get; set; }

  public string status { get; set; }
}
</pre>

GET and POST are done by using HttpHelper class. <a href="https://code.google.com/p/n-gshortener/">Download</a> the code to see this class.</p>  <h3>Conclusion</h3>  <p>Google Shortener API is as simple as it gets. The API also let’s you retrieve analytics data for URLs. I have created a .NET wrapper for the API and have implemented functionality to get short URLs and long URLs. Next steps for this little project are to implement list method, implement authentication support and make the API a bit more rich by enhancing Reply class to support strongly typed members rather than all strings.</p>  <p>One final time. <a href="https://code.google.com/p/n-gshortener/">Link to code</a>.</p>
