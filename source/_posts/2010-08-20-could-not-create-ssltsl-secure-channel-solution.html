---
layout: post
title: Could Not Create SSL/TSL Secure Channel Solution
categories:
- .NET
- Microsoft
tags:
- .Net
- Security
- WCF
- Web Services
- Windows 7
status: publish
type: post
published: true
meta:
  _wpas_done_all: '1'
  views: '7501'
  _edit_last: '1'
  _wp_rp_extracted_image_url: ''
  _wp_rp_extracted_image_url_full: ''
  simplecatch-sidebarlayout: ''
---
<p>Could Not Create SSL/TLS Secure Channel is an error you my get when communicating with web services in a two way SSL scenario from ASP.NET application. Here is a guide which you can follow to resolve the issue. I spent fair bit of time on this and I am documenting my approach here for future reference.</p>  <p>Make sure that you have proper certificates installed in the Local Machine certificate store. Because communication is two way SSL you will also have your private key installed.</p>  <p>Because your communication occurs via ASP.NET application this is a permissions issue . Your ASP.NET applications runs under the identity configured in the App Pool. You must grant permissions to that account under which your application is running to access the private key. Here’s how to do it.</p>  <p>Download WinHttpCertCfg tool from this <a href="http://www.microsoft.com/downloads/details.aspx?familyid=c42e27ac-3409-40e9-8667-c748e422833f&amp;displaylang=en">link</a>. Don’t worry about the system requirement on the page. I was able to run the tool successfully on Windows 7. After installing the tool go to your command prompt and go to the directory where WinHttpCertCfg is installed. On my machine WinHttpCertCfg is installed at C:Program Files (x86)Windows Resource KitsTools. </p>  <p>Run WinHttpCertCfg using this command. Substitute “IssuedToName” with the appropriate name for your certificate and same for “AccountName”. If your App Pool runs under NetworkService then that’s the account you’ll put in.</p>  <p><b>WinHttpCertCfg.exe -g -c LOCAL_MACHINEMY -s &quot;<var>IssuedToName</var>&quot; -a &quot;<var>AccountName</var>&quot;</b></p>  <p>This should take care of the permission issue and hopefully things will run as expected. In case this doesn’t work then investigate that your certificates are installed in the right store. I know you would have already done this but it doesn’t hurt to have another look. If all else fails then leave a comment and maybe I’ll also learn something new. In any case leave a comment :)</p>
