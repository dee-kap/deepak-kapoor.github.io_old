
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Android - ExpandableListView Tutorial - Deepak Kapoor</title>
  <meta name="author" content="Deepak Kapoor">

  
  <meta name="description" content="Introduction
In this tutorial I will show you how to use ExpandableListView widget in your Android app. ExpandableListView widget is used to display &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.deepakkapoor.net/2013/07/31/android-expandablelistview-tutorial">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/debug-release" rel="alternate" title="Deepak Kapoor" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<link href="/stylesheets/debrel.css" rel="stylesheet" type="text/css">
<meta name="google-site-verification" content="lgYJWL_s1AZLFOqJ9ejrQhbIkJcvzpsBZnUBGHcNk-w" />

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Deepak Kapoor</a></h1>
  
    <h2>Programming notes of Deepak Kapoor</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/debug-release" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.deepakkapoor.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
<!--  <li><a href="/books">Books</a></li>-->
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Android - ExpandableListView Tutorial</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-31T00:00:00+10:00" pubdate data-updated="true">Jul 31<span>st</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h3>Introduction</h3>
<p>In this tutorial I will show you how to use <strong>ExpandableListView</strong> widget in your Android app. ExpandableListView widget is used to display hierarchical data which is two levels deep. If your hierarchy is more than two levels then you should look at options other than ExpandableListView. Now let&#8217;s get started.</p>

<p>We will develop an app which displays a bunch of countries with some of their cities. When a user taps the name of a country, the widget expands to show cities. Below is a screenshot of the app.</p>

<img style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/07/ExpandableList2.png" width="640" height="737" />

<h3>Setup</h3>
<p>First thing we need is a class to hold information about countries and cities. Let&#8217;s create a class called Country.</p>

<pre class="prettyprint" lang="java">
public class Country {
  private String Name;
  private List<String> Cities;

  public Country(String name, List<String> cities) {
    Name = name;
    Cities = cities;
  }

  public String getName() {
    return Name;
  }

  public List<String> getCities() {
    return Cities;
  }
}
</pre>

<p>We will later populate a list of countries in our activity.</p>

<h3>Adapter</h3>

<p>Like <a href="http://www.debugrelease.com/2013/06/19/android-listview-tutorial/">ListView</a> widget, ExpandableListView also works with an adapter. Android SDK provides a BaseExpandableListAdapter which we can use for our simple example. We
will provide a constructor which takes a Context and a List of countries as arguments.</p>

<pre class="prettyprint" lang="java">
public CountryAdapter(Context context, List<Country> countries) {
  this.countries = countries;
  inflater = LayoutInflater.from(context);
}
</pre>

<p>The constructor will set the private member countries which will be later used by overriden methods in our adapter. We will also set our private Inflater object by calling LayoutInflater.from() method.</p>

<p>Next come the overrides which do most of the work. Before we get into the methods, let&#8217;s understand how ExpandableListView works. The concept is very simple, you have groups which in our case are countries. Within each group you have children which are cities in our example. And it is just that simple. Let&#8217;s look at some of the methods we will override in our adapter.</p>

<pre class="prettyprint" lang="java">
@Override
public int getGroupCount() {
  return countries.size();
}
</pre>

<p><strong>getChildrenCount</strong> returns the count of children. This method accepts one argument which is groupPosition. What we return here is the count of children for a particular group. In our example we will return the count of cities for a country.</p>

<pre class="prettyprint" lang="java">
@Override
public int getChildrenCount(int groupPosition) {
  return countries.get(groupPosition).getCities().size();
}
</pre>

<p><strong>hasStableIds</strong> method is used to inform if the id values for our objects will change during the course of our app.</p>

<p><strong>getGroupView</strong> is used to return a view which will be drawn for each group item. In this case we are using the simple_expandable_list_item_1 layout which is a part of the SDK.</p>

<pre class="prettyprint" lang="java">
@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
  if (convertView == null) {
    convertView = inflater.inflate(R.layout.simple_expandable_list_item_1, parent, false);
  }

  ((TextView) convertView).setText(getGroup(groupPosition).toString());
  return convertView;
}
</pre>

<p>Similarly <strong>getChildView</strong> returns the view used by each child item.</p>

<p>Some of the other methods such as getGroup, getChild, getGroupId and
getChildId are fairly intuitive.</p>

<p>Below is the entire code for our adapter.</p>

<pre class="prettyprint" lang="java">
package com.debugrelease.android.ExpandableListViewTutorial;

import android.R;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.TextView;

import java.util.List;

public class CountryAdapter extends BaseExpandableListAdapter {
  private List<Country> countries;
  private LayoutInflater inflater;

  public CountryAdapter(Context context, List<Country> countries) {
    this.countries = countries;
    inflater = LayoutInflater.from(context);
  }

  @Override
  public int getGroupCount() {
    return countries.size();
  }

  @Override
  public int getChildrenCount(int groupPosition) {
    return countries.get(groupPosition).getCities().size();
  }

  @Override
  public Object getGroup(int groupPosition) {
    return countries.get(groupPosition).getName();
  }

  @Override
  public Object getChild(int groupPosition, int childPosition) {
    return countries.get(groupPosition).getCities().get(childPosition);
  }

  @Override
  public long getGroupId(int groupPosition) {
    return groupPosition;
  }

  @Override
  public long getChildId(int groupPosition, int childPosition) {
    return childPosition;
  }

  @Override
  public boolean hasStableIds() {
    return true;
  }

  @Override
  public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    if (convertView == null) {
      convertView = inflater.inflate(R.layout.simple_expandable_list_item_1, parent, false);
    }

    ((TextView) convertView).setText(getGroup(groupPosition).toString());
    return convertView;
  }

  @Override
  public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
    if(convertView == null) {
      convertView = inflater.inflate(R.layout.simple_list_item_1, parent, false);
    }

    ((TextView)convertView).setText(getChild(groupPosition,childPosition).toString());
    return convertView;
  }

  @Override
  public boolean isChildSelectable(int i, int i2) {
    return false;
  }
}
</pre>

<h3>Main Activity</h3>
<p>The layout for our MainActivity will include an ExpandableListView within a <a href="http://www.debugrelease.com/2013/06/11/android-linear-layout-example/">LinearLayout</a>.</p>

<pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
  package=&quot;com.debugrelease.android.ExpandableListViewTutorial&quot;
  android:versionCode=&quot;1&quot;
  android:versionName=&quot;1.0&quot;&gt;
    &lt;uses-sdk android:minSdkVersion=&quot;15&quot;/&gt;
    &lt;application android:label=&quot;@string/app_name&quot; android:icon=&quot;@drawable/ic_launcher&quot;&gt;
        &lt;activity android:name=&quot;MainActivity&quot;
          android:label=&quot;@string/app_name&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;
        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;
    &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
&lt;/manifest&gt;
</pre>

<p>In our MainActivity class we will tie everything together. In this class we will load up a list of countries and in the <strong>onCreate</strong> method, we will set the adapter for our ExpandableListView. Below is the code for MainActivity.java</p>

<pre class="prettyprint" lang="java">
package com.debugrelease.android.ExpandableListViewTutorial;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ExpandableListView;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class MainActivity extends Activity {
  private static List<Country> Countries;
  private ExpandableListView expandableListView;
  private CountryAdapter adapter;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LoadCountries();
    expandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
    adapter = new CountryAdapter(this, Countries);
    expandableListView.setAdapter(adapter);
  }

  private void LoadCountries() {
    Countries = new ArrayList<Country>();

    ArrayList<String> citiesAustralia = new ArrayList<String>(
        Arrays.asList("Brisbane", "Hobart", "Melbourne", "Sydney"));
    Countries.add(new Country("Australia", citiesAustralia));

    ArrayList<String> citiesChina = new ArrayList<String>(
        Arrays.asList("Beijing", "Chuzhou", "Dongguan", "Shangzhou"));
    Countries.add(new Country("China", citiesChina));

    ArrayList<String> citiesIndia = new ArrayList<String>(
        Arrays.asList("Bombay", "Calcutta", "Delhi", "Madras"));
    Countries.add(new Country("India", citiesIndia));

    ArrayList<String> citiesNewZealand = new ArrayList<String>(
        Arrays.asList("Auckland", "Christchurch", "Wellington"));
    Countries.add(new Country("New Zealand", citiesNewZealand));

    ArrayList<String> citiesRussia = new ArrayList<String>(
        Arrays.asList("Moscow", "Kursk", "Novosibirsk", "Saint Petersburg"));
    Countries.add(new Country("Russia", citiesRussia));
  }
}

</pre>

<h3>Conclusion</h3>
<p>Like most of the other widgets, ExpandableListView is also very simple to work with. In this tutorial we saw an example which displays two levels deep hierarchical data of countries and cities using ExpandableListView. I hope you enjoyed it. Please leave a comment if you&#8217;d like to discuss something or have any questions.</p>
<p>The code for this tutorial can be found in my <a href="http://bit.ly/debrel-android-samples">Github repository</a>. Within the repository look for ExpandableListViewTutorial folder.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Deepak Kapoor</span></span>

      








  


<time datetime="2013-07-31T00:00:00+10:00" pubdate data-updated="true">Jul 31<span>st</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/android/'>Android</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://www.deepakkapoor.net/2013/07/31/android-expandablelistview-tutorial/" data-via="" data-counturl="http://www.deepakkapoor.net/2013/07/31/android-expandablelistview-tutorial/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2013/07/28/linux-install-handbrake-on-linux-mint-15/" title="Previous Post: Linux - Install Handbrake on Linux Mint 15">&laquo; Linux - Install Handbrake on Linux Mint 15</a>
      
      
        <a class="basic-alignment right" href="/2013/07/31/linux-set-wireless-bit-rate-permanently-on-ubuntu-or-linux-mint/" title="Next Post: Linux - Set wireless bit rate permanently on Ubuntu or Linux Mint">Linux - Set wireless bit rate permanently on Ubuntu or Linux Mint &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/07/31/linux-set-wireless-bit-rate-permanently-on-ubuntu-or-linux-mint/">Linux - Set Wireless Bit Rate Permanently on Ubuntu or Linux Mint</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/31/android-expandablelistview-tutorial/">Android - ExpandableListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/28/linux-install-handbrake-on-linux-mint-15/">Linux - Install Handbrake on Linux Mint 15</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/26/linux-virtualbox-windows-host-share-in-ubuntu-guest/">Linux VirtualBox - Windows Host Share in Ubuntu Guest</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/25/linux-setgid-on-directory-and-share-directory-with-users/">Linux - Setgid on Directory and Share Directory With Users</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/03/linux-number-of-files-in-directory/">Linux - Number of Files in Directory</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/24/android-listview-tutorial-with-images-and-text/">Android - ListView Tutorial With Images and Text</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/19/android-listview-tutorial/">Android - ListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/11/android-linear-layout-example/">Android - Linear Layout Example</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/02/ubuntu-font-and-zenburn-i-like-to-make-my-code-look-good/">Ubuntu Font and Zenburn - I Like to Make My Code Look Good</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Deepak Kapoor -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=8878331; 
var sc_invisible=0; 
var sc_security="f0e88835"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/free-hit-counter/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/8878331/0/f0e88835/0/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://plus.google.com/105555323627924521684?rel=author">Google Profile</a>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-975050-1', 'deepakkapoor.net');
  ga('send', 'pageview');

</script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'debugrelease';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.deepakkapoor.net/2013/07/31/android-expandablelistview-tutorial/';
        var disqus_url = 'http://www.deepakkapoor.net/2013/07/31/android-expandablelistview-tutorial/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
