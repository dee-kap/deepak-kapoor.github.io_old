
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Deepak Kapoor</title>
  <meta name="author" content="Deepak Kapoor">

  
  <meta name="description" content="In my previous post I showed you three different ways to capture the T-SQL query generated by LINQ To SQL. A comment on the post reminded me that I &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.deepakkapoor.net/blog/page/30">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/deepakkapoor" rel="alternate" title="Deepak Kapoor" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<link href="/stylesheets/debrel.css" rel="stylesheet" type="text/css">
<meta name="google-site-verification" content="lgYJWL_s1AZLFOqJ9ejrQhbIkJcvzpsBZnUBGHcNk-w" />

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Deepak Kapoor</a></h1>
  
    <h2>Programming and personal notes of Deepak Kapoor</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/deepakkapoor" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.deepakkapoor.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <!--<li><a href="/books">Books</a></li>-->
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/23/view-t-sql-query-generated-by-linq-to-sql-using-linqpad/">View T-SQL Query Generated by LINQ to SQL Using Linqpad</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-23T00:00:00+10:00" pubdate data-updated="true">Sep 23<span>rd</span>, 2008</time>
        
         | <a href="/2008/09/23/view-t-sql-query-generated-by-linq-to-sql-using-linqpad/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">In my <a href="http://www.debugrelease.com/view-query-generate-by-linq-to-sql/">previous post</a> I showed you three different ways to capture the T-SQL query generated by LINQ To SQL. A comment on the post reminded me that I forgot to mention a fourth way i.e. using <a href="http://www.linqpad.net/">Linqpad</a>. In Linqpad when you have executed the query you can click on the SQL tab next to Results and look at the T-SQL query.

<img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2008/09/image11.png" border="0" alt="image" width="525" height="373" />

Other than viewing generated queries, Linqpad is also a great tool for writing queries. The tool itself is very lightweight and comes with many templates to get you started.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/22/view-query-generate-by-linq-to-sql/">View T-SQL Query Generated by LINQ to SQL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-22T00:00:00+10:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2008</time>
        
         | <a href="/2008/09/22/view-query-generate-by-linq-to-sql/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">While working with LINQ To SQL there are times when you are interested in looking at the query which will be executed on the database.Â  This post will cover different ways you can capture the query generated by LINQ To SQL.
<h5>SQL Server Profiler</h5>
SQL Profile has long been a preferred tool to capture activity on a database. By running SQL Server Profiler you can easily view the queries which are submitted to database.

<img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2008/09/image9.png" border="0" alt="image" width="525" height="440" />
<h5>Output to Console Window</h5>
If you are like me and have your output window always displayed then you can write your queries to output windows using these simple techniques.

<pre class="lang:c# decode:true " >
context.Log = Console.Out;
</pre>

will print all queries to console if you are working on a console application or to Output Window of Visual Studio. I usually put this statement within #if DEBUG to see all generated queries.

In case you only want to write a specific query to console, you can use a statement like this.

<pre class="lang:c# decode:true " >
Console.WriteLine(context.GetCommand(query).CommandText);
</pre>

<h5>Using Debug Visualizer</h5>
Visual Studio provides a Visualizer which will also show you the generated query. You can use it like any other Visualizer by placing your mouse pointer over the query variable.

<img style="border-top-width: 0px; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2008/09/image10.png" border="0" alt="image" width="509" height="48" />
<h5>Summary</h5>
In daily practice I output all queries to Output Window. It allows me to quickly get a feel of number of queries my application is firing and I can also examine each one of them individually.

<a href="http://www.dotnetkicks.com/kick/?url=http%3a%2f%2fwww.thereforesystems.com%2fview-query-generate-by-linq-to-sql%2f"><img src="http://www.dotnetkicks.com/Services/Images/KickItImageGenerator.ashx?url=http%3a%2f%2fwww.thereforesystems.com%2fview-query-generate-by-linq-to-sql%2f" border="0" alt="kick it on DotNetKicks.com" /></a>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/17/code-sample-programmatically-download-file-using-c/">Code Sample: Programmatically Download File Using C#</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-17T00:00:00+10:00" pubdate data-updated="true">Sep 17<span>th</span>, 2008</time>
        
         | <a href="/2008/09/17/code-sample-programmatically-download-file-using-c/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">While browsing forums today I came across a question which asked for a solution to download a file from a web server programmatically. The solution is very simple and below is the code which achieves the goal. Here I am downloading a file asynchronously on Button Click.

<pre class="lang:c# decode:true " >
private void buttonDownloadFile_Click(object sender, EventArgs e)
{
	string url
		= @"https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2008/08/image35.png";

	// Create an instance of WebClient
	WebClient client = new WebClient();

	// Hookup DownloadFileCompleted Event
	client.DownloadFileCompleted +=
	new AsyncCompletedEventHandler(client_DownloadFileCompleted);

	// Start the download and copy the file to c:temp
	client.DownloadFileAsync(new Uri(url), @"c:tempimage35.png");
 }

 void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
 {
	MessageBox.Show("File downloaded");
 }
</pre>

You can also download the file synchronously using WebClient.DownloadFile() method.
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/16/use-sqlconnection-with-linq-to-sql/">Use SqlConnection With LINQ to SQL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-16T00:00:00+10:00" pubdate data-updated="true">Sep 16<span>th</span>, 2008</time>
        
         | <a href="/2008/09/16/use-sqlconnection-with-linq-to-sql/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">LINQ To SQL allows us to use a SqlConnection object to connect to a database. The way to use a SqlConnection is to pass it as a parameter to DataContext object. DataContext object has constructor which takes in a IDbConnection and SqlConnection implements this Interface. Here I create a SqlConnection object and use it to establish a connection to database.

<pre class="lang:c# decode:true " >

  // Create a Connection String
  string connectionString
    = "Data Source=.;Initial Catalog=Northwind2;Integrated Security=True";

  // Create a SqlConnection
  using (SqlConnection connection = new SqlConnection(connectionString))
  {
    // Create DataContext and pass in the connection 
    using (NorthwindDataContext context = new NorthwindDataContext(connection))
    {
      var query = from c in context.Customers
        select c.CompanyName;
      foreach (var item in query)
      {
        Console.WriteLine(item);

      }
    }
  }
</pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/09/16/linq-to-sql-join-on-multiple-conditions/">LINQ to SQL Join on Multiple Conditions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-09-16T00:00:00+10:00" pubdate data-updated="true">Sep 16<span>th</span>, 2008</time>
        
         | <a href="/2008/09/16/linq-to-sql-join-on-multiple-conditions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">LINQ To SQL or just plain LINQ allows us to do a join on multiple conditions using an elegant technique. In this post I will show you how to perform a Join on multiple conditions. As an example I will take two tables called House and ShoppingMall.

<img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2008/09/image5.png" border="0" alt="image" width="415" height="150" />

Both these tables have PostCode and CouncilCode as common fields. Lets say that we want to retrieve all records from ShoppingMall where both PostCode and CouncilCode on House match. This requires us to do a join using two columns. In LINQ such a join can be done using <strong>anonymous types</strong>. Here is an example.

<pre class="lang:c# decode:true " >
var query = from s in context.ShoppingMalls
            join h in context.Houses
            on
            new { s.CouncilCode, s.PostCode }
            equals
             new { h.CouncilCode, h.PostCode }
            select s;
</pre>

The code above gets translated into this SQL query.

<pre class="lang:tsql decode:true " >
SELECT [t0].[ShoppingMallId], [t0].[Address],
[t0].[PostCode], [t0].[CouncilCode]
FROM [dbo].[ShoppingMall] AS [t0]
INNER JOIN [dbo].[House] AS [t1]
ON ([t0].[CouncilCode] = [t1].[CouncilCode])
AND ([t0].[PostCode] = [t1].[PostCode])
</pre>

And when the above query is executed it produces the results we want.
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/31/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/29/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/11/27/octopress-setup-existing-blog-on-another-machine/">Octopress-Setup Existing Blog on Another Machine</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/31/linux-set-wireless-bit-rate-permanently-on-ubuntu-or-linux-mint/">Linux - Set Wireless Bit Rate Permanently on Ubuntu or Linux Mint</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/31/android-expandablelistview-tutorial/">Android - ExpandableListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/28/linux-install-handbrake-on-linux-mint-15/">Linux - Install Handbrake on Linux Mint 15</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/26/linux-virtualbox-windows-host-share-in-ubuntu-guest/">Linux VirtualBox - Windows Host Share in Ubuntu Guest</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/25/linux-setgid-on-directory-and-share-directory-with-users/">Linux - Setgid on Directory and Share Directory With Users</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/03/linux-number-of-files-in-directory/">Linux - Number of Files in Directory</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/24/android-listview-tutorial-with-images-and-text/">Android - ListView Tutorial With Images and Text</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/19/android-listview-tutorial/">Android - ListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/11/android-linear-layout-example/">Android - Linear Layout Example</a>
      </li>
    
  </ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Deepak Kapoor -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=8878331; 
var sc_invisible=0; 
var sc_security="f0e88835"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/free-hit-counter/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/8878331/0/f0e88835/0/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://plus.google.com/105555323627924521684?rel=author">Google Profile</a>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-975050-1', 'deepakkapoor.net');
  ga('send', 'pageview');

</script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'debugrelease';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
