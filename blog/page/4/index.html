
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Debug Release</title>
  <meta name="author" content="Deepak Kapoor">

  
  <meta name="description" content="This article is about serialization and deserialization in Microsoft .NET Framework. At the time of writing this article I am using .NET Framework 4. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.debugrelease.com/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://feeds.feedburner.com/debug-release" rel="alternate" title="Debug Release" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
<link href="/stylesheets/debrel.css" rel="stylesheet" type="text/css">
<meta name="google-site-verification" content="lgYJWL_s1AZLFOqJ9ejrQhbIkJcvzpsBZnUBGHcNk-w" />

  

</head>

<body   >
  <header role="banner"><hgroup>

  <h1><a href="/">Debug Release</a></h1>
  
    <h2>Hacking notes of Deepak Kapoor</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/debug-release" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.debugrelease.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/05/24/net-framework-serialize-and-deserialize-c-sharp/">.NET Framework - Serialize and Deserialize</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-24T00:00:00+10:00" pubdate data-updated="true">May 24<span>th</span>, 2013</time>
        
         | <a href="/2013/05/24/net-framework-serialize-and-deserialize-c-sharp/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This article is about serialization and deserialization in Microsoft .NET Framework. At the time of writing this article I am using .NET Framework 4.5. The concepts I talk about here also apply to all earlier versions.</p>

<p>Motivation to write this article came from a colleague on one of the projects I am busy with these days. I am mentoring a couple of developers who have joined the project straight out of university. They are here to learn the ropes of Microsoft .NET centric software development. Yesterday during a design discussion we talked about serialization of objects in our system. They are well familiar with the concepts of serialization, I showed them how it is done in .NET world.</p>
<p>Serialization is a technique we use to convert the state of an object to a format which can be persisted for later retrieval. Last sentence perhaps sounded very bookish. Let&#8217;s try some plain English and understand the concept using an example. We will use an example which involves pizza.</p>

<p>We will write a class to represent a Pizza. The class has a property Slices to hold the number of slices. When pizza object is initialized, the number of slices are set to 8. Pizza class also has methods for eating a slice, saving the pizza for later consumption and a method to get leftover pizza. Here are the stubs for properties and methods.</p>
<pre class="lang:c# decode:true " >public int Slices
public bool IsThereAnyPizzaLeftForMe

public void EatSlice()
public void SaveForLater()
public static Pizza GetLeftOverPizza()</pre> 
<p>We will now fill in the stubs for SaveForLater() and GetLeftOverPizza(). This is where we will serialize and deserialize our pizza object.</p>
 
<pre class="lang:c# decode:true " >public void SaveForLater()
{
	XmlSerializer serializer = new XmlSerializer(typeof(Pizza));

	using (StreamWriter writer = new StreamWriter(@"c:\temp\pizza.xml"))
	{
		serializer.Serialize(writer,this);
	}
}</pre> 

<p>In the code above we are saying that serialize the pizza object to XML file. XmlSerializer comes with .NET framework and can be found in System.Xml.Serialization namespace. Objects can also be serialized to binary format. We can look at that some other day. For now let&#8217;s go with XML.</p>

<p>Here is the code from a console application which creates an instance of Pizza class, eats a slice and calls SaveForLater() to serialize the object state to XML.</p>
 
<pre class="lang:c# decode:true " >static void Main(string[] args)
{
	Pizza pizza = new Pizza();
	Console.WriteLine("{0} slices left in the pizza", pizza.Slices);
	
	pizza.EatSlice();
	Console.WriteLine("{0} slices left in the pizza", pizza.Slices);

	pizza.SaveForLater();
}</pre> 

<p>Let&#8217;s look at the XML to which our pizza object was serialized. </p>
 
<pre class="lang:xhtml decode:true " >&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;Pizza xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;Slices&gt;7&lt;/Slices&gt;
&lt;/Pizza&gt;</pre> 

<p>Note that it only saves Slices property. There is no need to save/serialize the IsThereAnyPizzaLeftForMe property because it&#8217;s value can be determined by checking if Slices is equal to zero. XmlSerializer is smart enough to know which data is absolutely required to deserialize an object. Also methods are behaviors which act upon data so there is no need to retain them.</p>

<p>GetLefOverPizza() method creates an instance of Pizza object from XML. To be technically correct, it deserializes a pizza object from XML.</p>
 
<pre class="lang:c# decode:true " >public static Pizza GetLeftOverPizza()
{
	Pizza pizza = null;
	XmlSerializer serializer = new XmlSerializer(typeof(Pizza));

	using (FileStream fileStream = new FileStream(@"c:\temp\pizza.xml", FileMode.Open))
	{
	pizza = (Pizza)serializer.Deserialize(fileStream);
	}

	return pizza;
}</pre> 

<p>Another console application shows retrieving a left over pizza, eating a slice and then again saving it for later.</p>

<pre class="lang:c# decode:true " >static void Main(string[] args)
{
	Pizza pizza = Pizza.GetLeftOverPizza();
	Console.WriteLine("{0} slices left in the pizza", pizza.Slices);

	pizza.EatSlice();
	Console.WriteLine("{0} slices left in the pizza", pizza.Slices);

	pizza.SaveForLater();
	
}</pre> 

<p>So there you have it. A simple example which shows how to serialize and deserialize an object in .NET Framework.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/05/20/my-windows-phone-app-is-runner-up-in-lifehacker-and-microsofts-developer-challenge/">My Windows Phone App Is Runner-up in Lifehacker and Microsoft’s Developer Challenge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-20T00:00:00+10:00" pubdate data-updated="true">May 20<span>th</span>, 2013</time>
        
         | <a href="/2013/05/20/my-windows-phone-app-is-runner-up-in-lifehacker-and-microsofts-developer-challenge/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Found an uplifting email today in my mailbox which informed me that my app for Windows Phone has been a runner-up in <a href="http://www.lifehacker.com.au/2013/05/round-5-winners-lifehacker-and-microsofts-developer-challenge/">round 5 of Lifehacker and Microsoft’s developer challenge</a>. I am very happy about this and I&#8217;d like to thank those who judged my app to be worthy of recognition.&nbsp; I would also like to congratulate <a href="http://apps.microsoft.com/windows/en-ph/app/fair-football-coach/13eaa6b2-f12d-433a-8d50-5f5385c5ea99">Jared Homes</a> who won round 5 and <a href="https://twitter.com/almichener">Alistair Michener</a> who is also a runner-up for his awesome app <a href="http://apps.microsoft.com/windows/en-US/app/drawboard-pdf/6d65bcd8-8390-4533-af58-307d2e1ec1dd">Drawboard PDF</a>.</p><p>Thanks also to <a href="http://blogs.msdn.com/b/acoat/">Andrew Coates</a> and <a href="http://blogs.msdn.com/b/dglover/">Dave Glover</a> for their support and feedback.</p><p>Link to my app: <a href="http://www.windowsphone.com/en-au/store/app/visuals/f5fae584-ed47-4e26-a606-cd424767b632?appid=f5fae584-ed47-4e26-a606-cd424767b632">Visuals</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/05/03/disable-stylecop-settings-for-a-project/">Disable StyleCop Settings for a Project</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-03T00:00:00+10:00" pubdate data-updated="true">May 3<span>rd</span>, 2013</time>
        
         | <a href="/2013/05/03/disable-stylecop-settings-for-a-project/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">Tools like <a href="http://www.debugrelease.com/stylecop-tutorial/">StyleCop</a> have their place in the world and I have nothing against using them to produce consistently formatted code. It kinda makes the person higher up in the food chain brag to those higher above him about the quality of code being produced. However when I write code to try out things , I want the bloody thing to just go away and stop irritating me with you are missing a file header, using statements must be within namespace declaration etc.

It turns out that all the rules can be disabled easily by right clicking the project &#8211;&gt; StyleCop Settings. Then in the Rules tab by unchecking Enabled rules.

<a href="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/05/stylecopsettings.png"><img class="alignnone size-full wp-image-1909" alt="stylecopsettings" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/05/stylecopsettings.png" width="579" height="478" /></a>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/11/nuget-packages-and-source-control/">Nuget Packages and Source Control</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-11T00:00:00+10:00" pubdate data-updated="true">Apr 11<span>th</span>, 2013</time>
        
         | <a href="/2013/04/11/nuget-packages-and-source-control/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I use NuGet packages all the time for most of my projects. I ran into an issue on a project I am working on with another developer. We are using Github for source control and we are using many NuGet packages in our solution. The issue was that after adding NuGet packages and making sure that the code compiles and pushing my changes, my developer friend pulled the solution and could not build it. The reason being missing references. </p> <p>The solution:</p> <p>Right click on the solution and click <strong>Enable NuGet Package Restore</strong>. </p> <p><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="image" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image40.png" width="380" height="592"></p> <p>This option saved many hours of cannot-compile frustration.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2013/04/09/select-photos-on-windows-phone-with-photochoosertask/">Select Photos on Windows Phone With PhotoChooserTask</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-09T00:00:00+10:00" pubdate data-updated="true">Apr 9<span>th</span>, 2013</time>
        
         | <a href="/2013/04/09/select-photos-on-windows-phone-with-photochoosertask/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content">It is a common feature of many apps to select photos stored on the device. The feature can be implemented by using PhotoChooserTask class. In this post I will show you how to use PhotoChooserTask to select existing photos and also take photos using the camera.

Code for this post is available on <a href="https://github.com/deepak-kapoor/photochooser">Github</a>.

The UI for this app is very simple. It contains just one Image control and a button

<pre class="font:courier-new lang:xhtml decode:true">&lt;StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"&gt;
  &lt;Image x:Name="ImageChosen" /&gt;
  &lt;Button x:Name="ButtonChoosePhoto"
    Content="choose photo"
    Click="ButtonChoosePhoto_OnClick"/&gt;
&lt;/StackPanel</pre>

In the OnClick event handler I instantiate a PhotoChooserTask object, hook it with an event handler when Completed event is fired and finally call Show method on PhotoChooserTask.

 
<pre class="lang:c# decode:true " >private void ButtonChoosePhoto_OnClick(object sender, RoutedEventArgs e)
{
  PhotoChooserTask photoChooser = new PhotoChooserTask();
  photoChooser.Completed += photoChooser_Completed;
  photoChooser.Show();
}</pre> 


Within the event handler I place this code. The code checks if the TaskResult is OK and then creates a new BitmapImage object from the stream in PhotoResult object which is supplied as an argument to the handler.

 
<pre class="lang:c# decode:true " >void photoChooser_Completed(object sender, PhotoResult e)
{
  if (e.TaskResult == TaskResult.OK)
  {
    BitmapImage bitmap = new BitmapImage();
    bitmap.SetSource(e.ChosenPhoto);
    ImageChosen.Source = bitmap;
  }
}</pre> 


Here is the app in working.

<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="Photo Chooser" alt="Photo Chooser" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image.png" width="332" height="599" border="0" />

<img style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" alt="image" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image1.png" width="332" height="599" border="0" />

<img style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" alt="image" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image2.png" width="332" height="599" border="0" />

<img style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" alt="image" src="https://googledrive.com/host/0B6PDO8HPEQZNZWpTRms0ZWtlaUU/uploads/2013/04/image3.png" width="332" height="599" border="0" />
<h3>What about the camera?</h3>
What if the photo I am interested in is not on the phone and I’d like to use the camera. That’s very easy. PhotoChooserTask has an boolean property ShowCamera. I can set it to true to get an option to use camera.

 
<pre class="lang:c# decode:true " >private void ButtonChoosePhoto_OnClick(object sender, RoutedEventArgs e)
{
  PhotoChooserTask photoChooser = new PhotoChooserTask();
  photoChooser.Completed += photoChooser_Completed;
  photoChooser.ShowCamera = true;
  photoChooser.Show();
}</pre> 


Easy, isn’t it?
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/08/10/move-to-octopress/">Move to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/31/linux-set-wireless-bit-rate-permanently-on-ubuntu-or-linux-mint/">Linux - Set Wireless Bit Rate Permanently on Ubuntu or Linux Mint</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/31/android-expandablelistview-tutorial/">Android - ExpandableListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/28/linux-install-handbrake-on-linux-mint-15/">Linux - Install Handbrake on Linux Mint 15</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/26/linux-virtualbox-windows-host-share-in-ubuntu-guest/">Linux VirtualBox - Windows Host Share in Ubuntu Guest</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/25/linux-setgid-on-directory-and-share-directory-with-users/">Linux - Setgid on Directory and Share Directory With Users</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/03/linux-number-of-files-in-directory/">Linux - Number of Files in Directory</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/24/android-listview-tutorial-with-images-and-text/">Android - ListView Tutorial With Images and Text</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/19/android-listview-tutorial/">Android - ListView Tutorial</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/11/android-linear-layout-example/">Android - Linear Layout Example</a>
      </li>
    
  </ul>
</section>
<div id="fb-root"></div>
<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	    if (d.getElementById(id)) return;
	      js = d.createElement(s); js.id = id;
	        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=295226453878610";
		  fjs.parentNode.insertBefore(js, fjs);
		  }(document, 'script', 'facebook-jssdk'));</script>
	  <div style="text:align:center">
		  <div class="fb-like-box" data-href="https://www.facebook.com/pages/Debug-Release/473369436071930" data-width="250" data-show-faces="true" data-stream="false" data-show-border="true" data-header="false"></div></div>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Deepak Kapoor -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<!-- Start of StatCounter Code for Default Guide -->
<script type="text/javascript">
var sc_project=8878331; 
var sc_invisible=0; 
var sc_security="f0e88835"; 
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="free hit
counters" href="http://statcounter.com/free-hit-counter/"
target="_blank"><img class="statcounter"
src="http://c.statcounter.com/8878331/0/f0e88835/0/"
alt="free hit counters"></a></div></noscript>
<!-- End of StatCounter Code for Default Guide -->
&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://plus.google.com/105555323627924521684?rel=author">Google Profile</a>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41110156-1', 'debugrelease.com');
  ga('send', 'pageview');

</script>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'debugrelease';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
